---
import BaseLayout from '../../layouts/BaseLayout.astro';
import PostCard from '../../components/PostCard.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('posts', ({ data }) =>
  !data.draft && data.category === 'what-is-bitcoin'
);
const sortedPosts = posts.sort((a, b) => (a.data.order ?? 99) - (b.data.order ?? 99));
---

<BaseLayout title="What is Bitcoin?" description="Learn what Bitcoin is from the ground up. Digital gold, a network, a protocol, and the internet of money.">
  <section class="section-page section">
    <div class="container--wide">
      <header class="page-header reveal">
        <h1>What is Bitcoin?</h1>
        <p class="section-desc">Start from the beginning. Learn what Bitcoin is, why it matters, and how it works.</p>
      </header>

      {sortedPosts.length > 0 ? (
        <div class="card-grid stagger">
          {sortedPosts.map((post, i) => (
            <div class="reveal">
              <PostCard
                title={post.data.title}
                description={post.data.description}
                pubDate={post.data.pubDate}
                slug={post.id}
                tags={post.data.tags}
                image={post.data.image}
              />
            </div>
          ))}
        </div>
      ) : (
        <div class="empty-state">
          <div class="empty-icon">&#8383;</div>
          <h3 class="empty-title">Coming soon</h3>
          <p class="empty-desc">Articles are on the way. Check back soon.</p>
        </div>
      )}
    </div>
  </section>
</BaseLayout>

<style>
  .page-header {
    margin-bottom: var(--space-6);
  }

  .page-header h1 {
    margin-bottom: var(--space-3);
  }
</style>
